{"name":"@netlify/zip-it-and-ship-it","description":"Zip it and ship it","version":"0.3.1","author":{"name":"Netlify, Inc"},"ava":{"files":["src/**/*.test.js"],"cache":true,"concurrency":5,"failFast":false,"failWithoutAssertions":false,"tap":false,"compileEnhancements":false,"babel":false},"bin":{"zip-it-and-ship-it":"./bin.js"},"bugs":{"url":"https://github.com/netlify/zip-it-and-ship-it/issues"},"dependencies":{"archiver":"^3.0.0","cliclopts":"^1.1.1","debug":"^4.1.1","elf-tools":"^1.1.1","glob":"^7.1.3","minimist":"^1.2.0","npm-packlist":"^1.1.12","p-all":"^2.0.0","precinct":"^6.1.1","read-pkg-up":"^4.0.0","require-package-name":"^2.0.1","resolve":"^1.10.0"},"devDependencies":{"nyc":"^14.0.0","@babel/core":"^7.3.3","@babel/plugin-transform-runtime":"^7.1.0","@babel/preset-env":"^7.3.1","@babel/runtime":"^7.3.1","auto-changelog":"^1.12.0","ava":"^1.4.1","babel-eslint":"^10.0.1","babel-loader":"^8.0.5","cpx":"^1.5.0","dependency-check":"^3.3.0","eslint":"^5.14.1","eslint-config-prettier":"^4.0.0","eslint-plugin-import":"^2.16.0","eslint-plugin-node":"^8.0.1","eslint-plugin-prettier":"^3.0.1","gh-release":"^3.5.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.5","pkg":"^4.3.7","prettier":"^1.16.4","rimraf":"^2.6.3","tempy":"^0.2.1","util.promisify":"^1.0.0"},"engines":{"node":">=8.5.0"},"homepage":"https://github.com/netlify/zip-it-and-ship-it#README","keywords":["api","bundler","cli","lambda","lambda functions","netlify","static"],"license":"MIT","main":"index.js","pkg":{"targets":["node10"]},"repository":{"type":"git","url":"git+https://github.com/netlify/zip-it-and-ship-it.git"},"scripts":{"pkg":"rimraf build && run-p pkg:*","pkg:linux":"mkdirp build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_linux_amd64 && pkg . -t node10-linux-x64 --output build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_linux_amd64/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_linux_amd64 && tar -cvzf build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags)_Linux-64bit.tar.gz --directory=build/ zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_linux_amd64/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_linux_amd64","pkg:macos":"mkdirp build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_macos_amd64 && pkg . -t node10-macos-x64 --output build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_macos_amd64/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_macos_amd64 && tar -cvzf build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags)_macOS-64bit.tar.gz --directory=build/ zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_macos_amd64/zip-it-and-ship-it_$(git describe --abbrev=0 --tags | cut -c 2-)_macos_amd64","prepublishOnly":"run-s pkg && git push && git push --tags && gh-release -a build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags)_Linux-64bit.tar.gz,build/zip-it-and-ship-it_$(git describe --abbrev=0 --tags)_macOS-64bit.tar.gz","test":"run-s test:*","test:ava":"nyc --reporter=lcov ava --verbose && nyc report","test:deps":"dependency-check ./package.json --unused --missing --no-dev --no-peer","test:lint":"eslint src","version":"auto-changelog -p --template keepachangelog --breaking-pattern breaking && git add CHANGELOG.md"},"readme":"# zip-it-and-ship-it\n\n[![npm version][npm-img]][npm] [![build status][travis-img]][travis] [![dependencies][david-img]][david] [![downloads][dl-img]][dl]\n\nThis module handles zipping up lambda functions with their dependencies before deployment.  You are probably looking for [netlify-cli](https://github.com/netlify/cli) or [js-client](https://github.com/netlify/js-client).\n\n## Installation\n\n```bash\nnpm install zip-it-and-ship-it\n```\n\n## Usage\n\n```js\nconst { zipFunctions } = require(\"@netlify/zip-it-and-ship-it\");\n\nzipFunctions(\"functions\", \"functions-dist\");\n```\n\nThis will take all functions in the `functions` folder and create a matching `.zip` file in the `functions-dist` folder.\n\nEach function can either be a single `.js` file that exports a `handler` or a folder with a `.js` with the same name as the folder exporting a handler.\n\nThe packaging tool will look for the `package.json` closest to the handler and use that for dependency resolution. Make sure you've run `npm install` or `yarn` for each `package.json` before using `zip-it-and-ship-it`.\n\nIe, the following combinations would all work:\n\n```console\n/functions/foo.js\n/package.json\n/node_modules/\n```\n\n```console\n/functions/foo.js\n/functions/bar/bar.js\n/functions/package.json\n/functions/node_modules/\n```\n\n```console\n/functions/foo.js\n/functions/bar/bar.js\n/functions/bar/package.json\n/functions/bar/node_modules\n/package.json\n/node_modules/\n```\n\nZip It and Ship It will only include dependencies in each zip file that's been required from the relevant handler file.\n\n### File Serving\n\nAs of v0.3.0 the serveFunctions capability has been extracted out to [Netlify Dev](https://github.com/netlify/netlify-dev-plugin/).\n\n## API\n\n### `promise(zipped) = zipFunctions(source, destination, [opts])`\n\nDiscover and zip all functions found in the `source` path into the `destination`.  Returns a promise containing a `zipped` array ofÂ function objects.\n\nThe array of zipped function objects has the following shape:\n\n```js\n[\n  {\n    path,  // Absolute filepath to zipped function\n    runtime // 'go' or 'js'\n  }\n  //...\n]\n```\n\n`opts` include:\n\n```js\n{\n  parallelLimit: 5, // Limit the number of concurrent zipping operations at a time\n  skipGo: false // Don't zip go functions, just move them to the destination path\n}\n```\n\n## CLI\n\nA minimal CLI version of `zip-it-and-ship-it` is provided for use inside the [build-image](https://github.com/netlify/build-image), although this is automatically invoked on users behalf during builds and you typically do not need to run this yourself.\n\n```console\n$ zip-it-and-ship-it --help\n@netlify/zip-it-and-ship-it: Zip lambda functions and their dependencies for deployment\n\nUsage: zip-it-and-ship-it [source] [destination] {options}\n    --zip-go, -g          zip go binaries (default: false)\n    --help, -h            show help\n    --version, -v         print the version of the program\n```\n\n## See Also\n\nCheck [our official docs here](https://www.netlify.com/docs/cli/#unbundled-javascript-function-deploys).\n\n[npm-img]: https://img.shields.io/npm/v/@netlify/zip-it-and-ship-it.svg\n[npm]: https://npmjs.org/package/@netlify/zip-it-and-ship-it\n[travis-img]: https://img.shields.io/travis/netlify/zip-it-and-ship-it/master.svg\n[travis]: https://travis-ci.org/netlify/zip-it-and-ship-it\n[dl-img]: https://img.shields.io/npm/dm/@netlify/zip-it-and-ship-it.svg\n[dl]: https://www.npmjs.com/package/@netlify/zip-it-and-ship-it\n[david-img]: https://david-dm.org/netlify/zip-it-and-ship-it/status.svg\n[david]: https://david-dm.org/netlify/zip-it-and-ship-it\n","readmeFilename":"README.md","_id":"@netlify/zip-it-and-ship-it@0.3.1","_shasum":"931ba0b6f8d086b8ea2dba7cd69bf10959d3e529","_resolved":"https://registry.npmjs.org/@netlify/zip-it-and-ship-it/-/zip-it-and-ship-it-0.3.1.tgz","_from":"https://registry.npmjs.org/@netlify/zip-it-and-ship-it/-/zip-it-and-ship-it-0.3.1.tgz"}